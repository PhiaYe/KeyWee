<!DOCTYPE>
<html>
  <head>
    <meta charset="utf-8">
    <title>Firebase web QuickStart </title>
    <!-- <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script> -->
  </head>
  <body>

  <!-- Value -->
  <!-- <pre id="object"></pre> -->
  <!-- Child -->
    <h1 id="bigOne"></h1>

    <!-- <script src="app.js"></script> -->

    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAnbOzwuoz1Ng3k9IuNNFiIusfPkl2OfJQ",
        authDomain: "keywee-aeba7.firebaseapp.com",
        databaseURL: "https://keywee-aeba7.firebaseio.com",
        projectId: "keywee-aeba7",
        storageBucket: "keywee-aeba7.appspot.com",
        messagingSenderId: "150139905163"
      };
      firebase.initializeApp(config);

  var bigOne = document.getElementById('bigOne');
  var dbRef = firebase.database().ref().child('text');
  dbRef.on('value', snap => bigOne.innerText = snap.val());


  var email = "javier.xing127@gmail.com";
  var password = "password";

  firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error){
    var errorCode = error.code;
    var errorMessage = error.message;
    console.log(error.code);
    console.log(error.message);
  }).then(function(){

    firebase.auth().onAuthStateChanged(function(user) {
      // User is signed in.
      firebase.database().ref().child('users').child(user.uid).set({
          name: "Javier",
          age: 12,
          gender: "male",
          email: "test_email@gmail.com",
          profile_picture : "placeholder picture",
          points: 5,
          description: "Example description"
        });
    });

  firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
    if (error){
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      console.log(error.code);
      console.log(error.message);
    }
  });
});

// EXAMPLE TEST CODE TO CHECK IF FIREBASE WRITING WORK
  // firebase.database().ref().child('users').child('firstUser').set({
  //     username: "name",
  //     email: "email",
  //     profile_picture : "image"
  //   });
  //
  //   firebase.database().ref().child('users').child('secondUser').set({
  //       username: "this and that",
  //       email: "email",
  //       profile_picture : "image"
  //     });

</script>
  </body>
</html>
